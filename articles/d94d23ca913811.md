---
title: "[Next.js]Canvasã§ç”»åƒã‚’æç”»ã™ã‚‹"
emoji: "ğŸ”¥"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["nextjs", "canvas"]
published: true
---

## Next.js ã§ canvas ã‚’ä½¿ã† Example

```ts
import { useEffect, useState } from "react";
const image = () => {
  const [imageURL, setImageURL] = useState<string>();

  useEffect(() => {
    // canvasã‚’ç”Ÿæˆ
    const Canvas = document.createElement("canvas");
    // ç”»åƒã‚µã‚¤ã‚º
    Canvas.width = 1200;
    Canvas.height = 630;

    // èƒŒæ™¯ä½œæˆ
    const baseCtx = Canvas.getContext("2d");
    if (baseCtx) {
      baseCtx.fillStyle = "#fff";
      baseCtx.fillRect(0, 0, 1200, 630);
    }
    // æ–‡ç« ä½œæˆ
    const textCtx = Canvas.getContext("2d");
    if (textCtx) {
      textCtx.fillStyle = "gray";
      textCtx.font = "50px 'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";
      textCtx.textAlign = "left";
      textCtx.textBaseline = "top";
      textCtx.fillText("tset", 120, 200, 1200);
    }
    // ç”»åƒURLã‚’ç”Ÿæˆ
    setImageURL(Canvas.toDataURL("image/png"));
  }, []);
  return <img src={imageURL} />;
};
```

## æ³¨æ„ç‚¹

DOM æ“ä½œãªã®ã§ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§`document`ãŒãªã„ã¨ä½¿ãˆã¾ã›ã‚“ã€‚
`document`ãŒãªã„ã¨ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚

ã¾ã ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¦ãªã„çŠ¶æ…‹ã§ã‚‚å‘¼ã³å‡ºã•ã‚Œã¦ã—ã¾ã†ã®ã§ã€å¿…ãš`useEffect`ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã€ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¦ã‹ã‚‰å‘¼ã³å‡ºã™ã‚ˆã†ã«ã—ã¾ã™ã€‚
